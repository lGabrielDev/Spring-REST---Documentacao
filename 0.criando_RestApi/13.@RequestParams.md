<h1 align="center">
    @RequestParam
    <img src="https://cdn1.iconfinder.com/data/icons/ux-and-ui-5/520/450_Options_Volume_Parameters_Sliders-256.png" alt="routes icon" width="90px" align="center">
</h1>

## Relembrando <img src="https://cdn-icons-png.flaticon.com/512/201/201652.png" alt="imagem" width="50px" align="center">

Sempre que estamos enviando ou recebendo dados, podemos transmitir esses dados/objetos das seguintes formas:

- `@RequestBody` --> Usamos quando queremos enviar um objeto no corpo da requisi√ß√£o. Geralmente quando queremos criar ou atualizar um registro(`POST` and `PUT`).

<br>

- `@PathVariable` --> Usamos para passar vari√°veis diretamente pela URL. Geralmente usamos para identificar registros √∫nicos.

<br>

- `@Query` + `@Param` --> Criamos uma variable para usar diretamente na Query.

<br>

- `@RequestParam` --> Usamos para passar v√°rios par√¢metros em uma √∫nica rota. Quando queremos ter uma rota flex√≠vel, podendo passar ou n√£o esses par√¢metros.


<hr>
<br>

## `@RequestParam`

Sempre que queremos dar opcoes adicionais para uma rota, vamos usar esses **@RequestParams**.

Imagine o seguinte:

- http://localhost:8080/students

Essa √© a rota que retorna todos os Students.

Se quis√©ssemos filtrar esses Students por "email", "id", "name", "apenas tantas rows", precisar√≠amos criar uma rota para cada filtro:

- http://localhost:8080/students/filtarPorEmail/{email}
- http://localhost:8080/students/filtrarPorName/{name}
- http://localhost:8080/students/filtrarPorId/{id}
- http://localhost:8080/students/filtrarPorRows/{quantasRows}
- etc...


Quando usamos **@RequestParams**, podemos continuar com a mesma rota e setar opcoes adicionais de consulta.

Assim, se o cliente digitar:

#### Rota crua:
- http://localhost:8080/students --> Ele recebe TODOS os students, sem filtro

<br>


#### Mesma rota, s√≥ que com parametros adicionais
- http://localhost:8080/api/v1/students `?emailParecidoCom=lol.com` --> Filtrando por "email"
- http://localhost:8080/api/v1/students `?quantidadeDeRegistros=2` --> limitando por "quantidade de rows"
- http://localhost:8080/api/v1/students `?quantidadeDeRegistros=4`&`emailParecidoCom=lol.com` --> Usando os dois filtros


<hr>
<br>

## Criando nossa rota com opcoes `@RequestParam`

Vamos pegar o exemplo da rota GET que retorna todos os Students.

‚úèÔ∏è Na rota `/students`, adicione 2 opcoes de filtro:

O cliente vai poder:
- Listar todos os Students --> Rota padr√£o
- Listar apenas os Students com "tal" email.
- Listar apenas "tantas rows" de Students

<br>

### Controller

```java
//READ ALL STUDENTS, com opcoes de @RequestParams se o cliente quiser

@GetMapping("/students")
public List<Student> getAllStudent(
    @RequestParam(value = "emailParecidoCom", required = false) String emailParecidoCom, //vamos informar esse parametro atraves do RequestParam da requisicao
    @RequestParam(value = "quantidadeDeRegistros", required = false) Integer quantidadeDeRegistros){ //vamos informar esse parametro atraves do RequestParam da requisicao

    return this.ss.getStudents(emailParecidoCom, quantidadeDeRegistros);
}
```

‚ö†Ô∏è Importante passar o parametro **required** com `false`. Assim, o cliente n√£o √© obrigado a passar esses parametros. Ele filtra se ele quiser. Sacou??

Se ele quiser acessar a rota padrao `/students/`, ele acessa de boas.

<br>
<br>

### Service

Dependendo dos @RequestParams que forem informados, retornarmos a query ideal.

```java
//GET- READ all Student, com opcoes de filtragem se ele quiser
    
public List<Student> getStudents(String emailParecidoCom, Integer quantidadeDeRegistros){
    //dependendo dos RequestParams que forem informados, retornamos a query ideal

    //se nenhum RequestParam for preenchido, retornamos a lista com todos Students completa
    if(emailParecidoCom == null && quantidadeDeRegistros == null){
        return  this.sr.findAll();
    }

    //Filtrando apenas pelo "email"
    if(emailParecidoCom != null && quantidadeDeRegistros == null){
        return this.sr.findAllOnlyByEmail(emailParecidoCom);
    }

    //Apenas Lmitando as rows
    if(quantidadeDeRegistros != null && emailParecidoCom == null){
        return this.sr.findAllOnlyByLimitedRows(quantidadeDeRegistros);
    }
    //se forem preenchidos todos os request params:
    else{
        return this.sr.findAllByEmailAndLimit(emailParecidoCom, quantidadeDeRegistros);
    }
}
```

<br>
<br>


## Repository


```java
// ========================================== READ ==========================================

//READ ALL
@Query(nativeQuery = false, value = "SELECT s FROM Student s ORDER BY s.id ASC")
public List<Student> findAll();


//findAll, filtrando apenas por "email"
@Query(nativeQuery = false, value = "SELECT s FROM Student s WHERE s.email LIKE %:emailParecidoCom% ORDER BY s.id ASC")
public List<Student> findAllOnlyByEmail(@Param(value = "emailParecidoCom") String emailParecidoCom);


//findAll, apenas limitando o numero de rows
@Query(nativeQuery = false, value = "SELECT s FROM Student s ORDER BY s.id ASC LIMIT :quantidadeDeRows")
public List<Student> findAllOnlyByLimitedRows(@Param(value = "quantidadeDeRows") Integer quantidadeDeRows);

//findAll, filtrando por "email" e limitando o numero de rows
@Query(nativeQuery = false, value = "SELECT s FROM Student s WHERE s.email LIKE %:emailParecidoCom% ORDER BY s.id ASC LIMIT :quantidadeDeRows")
public List<Student> findAllByEmailAndLimit(@Param("emailParecidoCom") String emailParecidoCom, @Param("quantidadeDeRows") Integer quantidadeDeRows);

```

‚ö†Ô∏è Escrevemos a query igualzinho fazemos no SQL. Por√©m, aqui n√£o vamos utilizar o  `''` (aspas simples). Usamos a variable direto.

`LIKE %:emailParecidoCom%` --> Apenas "email" parecido com **qualquer coisa, msn, qualquer coisa**.


<br>

‚úèÔ∏è Fa√ßa o teste da rota e veja se os `@RequestParam` est√£o funcionando.


‚ö†Ô∏è Lembrando que voce tem que passar os **RequestParams** exatamente na ordem que voce criou os parametros. Se quiser passar em ordem diferente, voce teria que criar uma outra rota na controller.


Easy! üòé

<hr>
<br>

## Relembrando <img src="https://cdn-icons-png.flaticon.com/512/201/201652.png" alt="imagem" width="50px" align="center">

Sempre que estamos enviando ou recebendo dados, podemos transmitir esses dados/objetos das seguintes formas:

- `@RequestBody` --> Usamos quando queremos enviar um objeto no corpo da requisi√ß√£o. Geralmente quando queremos criar ou atualizar um registro(`POST` and `PUT`).

<br>

- `@PathVariable` --> Usamos para passar vari√°veis diretamente pela URL. Geralmente usamos para identificar registros √∫nicos.

<br>

- `@Query` + `@Param` --> Criamos uma variable para usar diretamente na Query.

<br>

- `@RequestParam` --> Usamos para passar v√°rios par√¢metros em uma √∫nica rota. Quando queremos ter uma rota flex√≠vel, podendo passar ou n√£o esses par√¢metros.

