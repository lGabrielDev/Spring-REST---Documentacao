<h1 align="center">
    @PostMapping - CREATE
    <img src="https://cdn3.iconfinder.com/data/icons/file-folders/64/1-30-256.png" alt="routes icon" width="80px" align="center">
</h1>

Para criar Students no nosso banco de dados, precisamos fazer um request do tipo `@PostMapping`.

`@PostMapping` --> **INSERT INTO**

Vamos enviar esse objeto Student atrav√©s do `@RequestBody`. Ou seja, vamos informar esse Student no body da requisi√ß√£o.

Sempre vamos seguir o padrao Restful no plural:

<img src="../imgs/rest_routes_example.png" alt="restful routes image" width="550px">

## Controller
Para criarmos um Student, vamos usar um "StudentDTO", removendo o campo #ID. Afinal, n√£o precisamos informar esse campo para criar um novo registro, certo?

‚úèÔ∏è Crie uma Class "StudentDTOCreate".

<br>

Vamos criar a rota e o method para criar um Student

```java
@RestController //class controlador rest. √â aqui que recebemos os requests http do cliente. Aqui, criamos as rotas.
@RequestMapping("/api/v1") //setamos a url padr√£o da API
public class StudentController {

    //attributes
    private StudentService ss;

    //constructor
    public StudentController(StudentService ss){
        this.ss = ss;
    }

    // ============= POST =============
    @PostMapping("/students")
    public ResponseEntity<StudentFullDTO> createStudent(@RequestBody StudentCreateDTO novoStudent){
        return ResponseEntity
            .status(HttpStatus.CREATED)
            .body(this.ss.createStudent(novoStudent));
    }
}
```
Vamos chamar um method da Service.

Perceba que vamos trabalhar com 2 DTOs.

- Vamos passar um "**StudentDTOCreate**" no body da requisicao. Ou seja, nao precisamos informar o "id" nem o "age". Vamos passar um Dto mais clean.
- J√° no retorno do method, vamos retornar um "**StudentDTOFull**", j√° que queremos retornar todas as informacoes do Student.

<hr>
<br>

## Service
Vamos chamar um method da Repository. Para criar objetos no banco, usamos o method `.save()` da Repository/JPA.

Aqui n√£o precisamos criar uma Query, pois o method `.save()` j√° salva no banco.

```java
@Service //essa eh uma service class. Aqui, vamos criar a l√≥gico de negocio e validar os dados
public class StudentService {
    
    //attributes
    private StudentRepository sr;

    //constructor or @Autowired
    public StudentService(StudentRepository sr){
        this.sr = sr;
    }

    // ============= POST =============
    public StudentFullDTO createStudent(StudentCreateDTO studentDto){
        
        //name validations
        NameValidations.nameAllValidationsAreCorrect(studentDto.getName());
        
        //email validations...
        
        //birthday validations...


        Student novoStudent = new Student();
        novoStudent.setName(studentDto.getName());
        novoStudent.setEmail(studentDto.getEmail());
        novoStudent.setBirthday(studentDto.getBirthday());

        this.sr.save(novoStudent); //salvamos no banco

        return new StudentFullDTO(novoStudent);
    }
}
```

üí° Importante lembrar que o method `.save()` pode tanto criar um registro como alterar um registro.

- `.save()` --> Se voc√™ n√£o informar o campo *#ID* ou passar um #ID que n√£o existe, √© criado um novo registro.
- `.save()` --> Se voc√™ informar um *#ID* que existe, √© alterado o registro.

Entao, sempre que quisermos cadastrar um novo registro, n√£o precisamos preencher o #ID.

<hr>
<br>

## Repository

```java
@Repository
public interface StudentRepository extends JpaRepository<Student, Long>{
    //queries

    //CREATE
}
```

üìñ N√£o precisamos criar uma query para salvar no banco. Vamos usar o method `.save()` j√° criado pela JPA.

<hr>
<br>

## Criando um objeto
V√° no postman e crie um request do tipo **Post**. L√° no body do request, informe o objeto que voce deseja criar.

<img src="../imgs/request_body.png" alt="restful routes image" width="550px">

<br>

Dale!! üòé

<br>
<br>

N√£o se preocupe com as validacoes dos outros campos/attributes agora. Respira.

<br>

‚ö†Ô∏è Lembre-se que o que √© retornado no body da requisicao √© um objeto JSON. O que aparece s√£o os methods `get()` e n√£o o toString().